<!DOCTYPE html>

<html>
  <head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/main.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="http://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <title>Labor vs. Health</title>

  </head>

  
  <body>
    <nav class="navbar navbar-inverse">
      <div class="navbar-header">
	<a class="navbar-brand" href="#">London School Joggers</a>
      </div>
      <div> 
	<ul class = "nav navbar-nav">
	  <li class = "active"> <a class="navbar-link" href="#"> Unemployment and Drug Use </a> </li>
	  <li> <a class="navbar-link" href="#"> About </a> </li>
	</ul>
      </div>
    </nav>

    <div class="container">
      <div class="jumbotron">
	<h1 align="center"> Unemployment//Drug Use</h1>      
	<p>This graph shows unemployment data against drug rates nationally over a period of time </p>
      </div>
    </div>

    <div class="container" align="center">
        <svg id="svg"></svg>
    </div>

  </body>
  <script src="../static/js/main.js">  </script>
  <script>
      // setting dimensions of canvas
      var margin = {top: 30, right: 40, bottom: 50, left: 60},
      width = 800 - margin.left - margin.right,
      height = 800 - margin.bottom - margin.top;

      // actual svg
      var svg = d3.select(".svg")
      .attr("width", width + margin.left + margin.right)
      .attr("height", height + margin.top + margin.bottom)
      .append("g")
      .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
 
       // actual data stuff
       var data = {{data | safe}}
       var year = {{year}}
       var max = 0;
       for (var key in data){
          //get the max here
       }

       //
       var y = d3.scaleLinear()
             .domain([max,0])
             .range([0,height]);

       //might have to change stuff here
       var x = d3.scaleBand()
                 .domain(d3.entries(data).map(function(d){return d.value[year];}));

       svg.selectAll(".bar")
          .data(d3.entries(data))
          .enter().append("rect")
          .attr("class","bar")
          .attr("fill", "steelblue")
          .attr("x", function(d){return x(d.keys)})
          .attr("y", function(d){return y(d.values[year])})
          .attr("height", function(d){return height - y(d.values[year])})
          .attr("width", x.bandwidth());

       //



  </script>



</html>
